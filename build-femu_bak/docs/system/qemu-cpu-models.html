
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>QEMU / KVM CPU model configuration &#8212; QEMU  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="qemu-kvm-cpu-model-configuration">
<h1>QEMU / KVM CPU model configuration<a class="headerlink" href="#qemu-kvm-cpu-model-configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p>QEMU CPU Modelling Infrastructure manual</p>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<div class="section" id="recommendations-for-kvm-cpu-model-configuration-on-x86-hosts">
<h3>Recommendations for KVM CPU model configuration on x86 hosts<a class="headerlink" href="#recommendations-for-kvm-cpu-model-configuration-on-x86-hosts" title="Permalink to this headline">¶</a></h3>
<p>The information that follows provides recommendations for configuring
CPU models on x86 hosts. The goals are to maximise performance, while
protecting guest OS against various CPU hardware flaws, and optionally
enabling live migration between hosts with heterogeneous CPU models.</p>
<div class="section" id="two-ways-to-configure-cpu-models-with-qemu-kvm">
<h4>Two ways to configure CPU models with QEMU / KVM<a class="headerlink" href="#two-ways-to-configure-cpu-models-with-qemu-kvm" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p class="first"><strong>Host passthrough</strong></p>
<p>This passes the host CPU model features, model, stepping, exactly to
the guest. Note that KVM may filter out some host CPU model features
if they cannot be supported with virtualization. Live migration is
unsafe when this mode is used as libvirt / QEMU cannot guarantee a
stable CPU is exposed to the guest across hosts. This is the
recommended CPU to use, provided live migration is not required.</p>
</li>
<li><p class="first"><strong>Named model</strong></p>
<p>QEMU comes with a number of predefined named CPU models, that
typically refer to specific generations of hardware released by
Intel and AMD.  These allow the guest VMs to have a degree of
isolation from the host CPU, allowing greater flexibility in live
migrating between hosts with differing hardware.  &#64;end table</p>
</li>
</ol>
<p>In both cases, it is possible to optionally add or remove individual CPU
features, to alter what is presented to the guest by default.</p>
<p>Libvirt supports a third way to configure CPU models known as “Host
model”.  This uses the QEMU “Named model” feature, automatically picking
a CPU model that is similar the host CPU, and then adding extra features
to approximate the host model as closely as possible. This does not
guarantee the CPU family, stepping, etc will precisely match the host
CPU, as they would with “Host passthrough”, but gives much of the
benefit of passthrough, while making live migration safe.</p>
</div>
<div class="section" id="preferred-cpu-models-for-intel-x86-hosts">
<h4>Preferred CPU models for Intel x86 hosts<a class="headerlink" href="#preferred-cpu-models-for-intel-x86-hosts" title="Permalink to this headline">¶</a></h4>
<p>The following CPU models are preferred for use on Intel hosts.
Administrators / applications are recommended to use the CPU model that
matches the generation of the host CPUs in use. In a deployment with a
mixture of host CPU models between machines, if live migration
compatibility is required, use the newest CPU model that is compatible
across all desired hosts.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">Cascadelake-Server</span></code>, <code class="docutils literal notranslate"><span class="pre">Cascadelake-Server-noTSX</span></code></dt>
<dd>Intel Xeon Processor (Cascade Lake, 2019), with “stepping” levels 6
or 7 only.  (The Cascade Lake Xeon processor with <em>stepping 5 is
vulnerable to MDS variants</em>.)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Skylake-Server</span></code>, <code class="docutils literal notranslate"><span class="pre">Skylake-Server-IBRS</span></code>, <code class="docutils literal notranslate"><span class="pre">Skylake-Server-IBRS-noTSX</span></code></dt>
<dd>Intel Xeon Processor (Skylake, 2016)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Skylake-Client</span></code>, <code class="docutils literal notranslate"><span class="pre">Skylake-Client-IBRS</span></code>, <code class="docutils literal notranslate"><span class="pre">Skylake-Client-noTSX-IBRS}</span></code></dt>
<dd>Intel Core Processor (Skylake, 2015)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Broadwell</span></code>, <code class="docutils literal notranslate"><span class="pre">Broadwell-IBRS</span></code>, <code class="docutils literal notranslate"><span class="pre">Broadwell-noTSX</span></code>, <code class="docutils literal notranslate"><span class="pre">Broadwell-noTSX-IBRS</span></code></dt>
<dd>Intel Core Processor (Broadwell, 2014)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Haswell</span></code>, <code class="docutils literal notranslate"><span class="pre">Haswell-IBRS</span></code>, <code class="docutils literal notranslate"><span class="pre">Haswell-noTSX</span></code>, <code class="docutils literal notranslate"><span class="pre">Haswell-noTSX-IBRS</span></code></dt>
<dd>Intel Core Processor (Haswell, 2013)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">IvyBridge</span></code>, <code class="docutils literal notranslate"><span class="pre">IvyBridge-IBR</span></code></dt>
<dd>Intel Xeon E3-12xx v2 (Ivy Bridge, 2012)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SandyBridge</span></code>, <code class="docutils literal notranslate"><span class="pre">SandyBridge-IBRS</span></code></dt>
<dd>Intel Xeon E312xx (Sandy Bridge, 2011)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Westmere</span></code>, <code class="docutils literal notranslate"><span class="pre">Westmere-IBRS</span></code></dt>
<dd>Westmere E56xx/L56xx/X56xx (Nehalem-C, 2010)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Nehalem</span></code>, <code class="docutils literal notranslate"><span class="pre">Nehalem-IBRS</span></code></dt>
<dd>Intel Core i7 9xx (Nehalem Class Core i7, 2008)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Penryn</span></code></dt>
<dd>Intel Core 2 Duo P9xxx (Penryn Class Core 2, 2007)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Conroe</span></code></dt>
<dd>Intel Celeron_4x0 (Conroe/Merom Class Core 2, 2006)</dd>
</dl>
</div>
<div class="section" id="important-cpu-features-for-intel-x86-hosts">
<h4>Important CPU features for Intel x86 hosts<a class="headerlink" href="#important-cpu-features-for-intel-x86-hosts" title="Permalink to this headline">¶</a></h4>
<p>The following are important CPU features that should be used on Intel
x86 hosts, when available in the host CPU. Some of them require explicit
configuration to enable, as they are not included by default in some, or
all, of the named CPU models listed above. In general all of these
features are included if using “Host passthrough” or “Host model”.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">pcid</span></code></dt>
<dd><p class="first">Recommended to mitigate the cost of the Meltdown (CVE-2017-5754) fix.</p>
<p>Included by default in Haswell, Broadwell &amp; Skylake Intel CPU models.</p>
<p class="last">Should be explicitly turned on for Westmere, SandyBridge, and
IvyBridge Intel CPU models. Note that some desktop/mobile Westmere
CPUs cannot support this feature.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">spec-ctrl</span></code></dt>
<dd><p class="first">Required to enable the Spectre v2 (CVE-2017-5715) fix.</p>
<p>Included by default in Intel CPU models with -IBRS suffix.</p>
<p>Must be explicitly turned on for Intel CPU models without -IBRS
suffix.</p>
<p class="last">Requires the host CPU microcode to support this feature before it
can be used for guest CPUs.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stibp</span></code></dt>
<dd><p class="first">Required to enable stronger Spectre v2 (CVE-2017-5715) fixes in some
operating systems.</p>
<p>Must be explicitly turned on for all Intel CPU models.</p>
<p class="last">Requires the host CPU microcode to support this feature before it can
be used for guest CPUs.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ssbd</span></code></dt>
<dd><p class="first">Required to enable the CVE-2018-3639 fix.</p>
<p>Not included by default in any Intel CPU model.</p>
<p>Must be explicitly turned on for all Intel CPU models.</p>
<p class="last">Requires the host CPU microcode to support this feature before it
can be used for guest CPUs.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pdpe1gb</span></code></dt>
<dd><p class="first">Recommended to allow guest OS to use 1GB size pages.</p>
<p>Not included by default in any Intel CPU model.</p>
<p>Should be explicitly turned on for all Intel CPU models.</p>
<p class="last">Note that not all CPU hardware will support this feature.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">md-clear</span></code></dt>
<dd><p class="first">Required to confirm the MDS (CVE-2018-12126, CVE-2018-12127,
CVE-2018-12130, CVE-2019-11091) fixes.</p>
<p>Not included by default in any Intel CPU model.</p>
<p>Must be explicitly turned on for all Intel CPU models.</p>
<p class="last">Requires the host CPU microcode to support this feature before it
can be used for guest CPUs.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mds-no</span></code></dt>
<dd><p class="first">Recommended to inform the guest OS that the host is <em>not</em> vulnerable
to any of the MDS variants ([MFBDS] CVE-2018-12130, [MLPDS]
CVE-2018-12127, [MSBDS] CVE-2018-12126).</p>
<p>This is an MSR (Model-Specific Register) feature rather than a CPUID feature,
so it will not appear in the Linux <code class="docutils literal notranslate"><span class="pre">/proc/cpuinfo</span></code> in the host or
guest.  Instead, the host kernel uses it to populate the MDS
vulnerability file in <code class="docutils literal notranslate"><span class="pre">sysfs</span></code>.</p>
<p class="last">So it should only be enabled for VMs if the host reports &#64;code{Not
affected} in the <code class="docutils literal notranslate"><span class="pre">/sys/devices/system/cpu/vulnerabilities/mds</span></code> file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">taa-no</span></code></dt>
<dd><p class="first">Recommended to inform that the guest that the host is <code class="docutils literal notranslate"><span class="pre">not</span></code>
vulnerable to CVE-2019-11135, TSX Asynchronous Abort (TAA).</p>
<p>This too is an MSR feature, so it does not show up in the Linux
<code class="docutils literal notranslate"><span class="pre">/proc/cpuinfo</span></code> in the host or guest.</p>
<p class="last">It should only be enabled for VMs if the host reports <code class="docutils literal notranslate"><span class="pre">Not</span> <span class="pre">affected</span></code>
in the <code class="docutils literal notranslate"><span class="pre">/sys/devices/system/cpu/vulnerabilities/tsx_async_abort</span></code>
file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tsx-ctrl</span></code></dt>
<dd><p class="first">Recommended to inform the guest that it can disable the Intel TSX
(Transactional Synchronization Extensions) feature; or, if the
processor is vulnerable, use the Intel VERW instruction (a
processor-level instruction that performs checks on memory access) as
a mitigation for the TAA vulnerability.  (For details, refer to
Intel’s <a class="reference external" href="https://software.intel.com/security-software-guidance/insights/deep-dive-intel-analysis-microarchitectural-data-sampling">deep dive into MDS</a>.)</p>
<p>Expose this to the guest OS if and only if: (a) the host has TSX
enabled; <em>and</em> (b) the guest has <code class="docutils literal notranslate"><span class="pre">rtm</span></code> CPU flag enabled.</p>
<p>By disabling TSX, KVM-based guests can avoid paying the price of
mitigating TSX-based attacks.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">tsx-ctrl</span></code> too is an MSR feature, so it does not show
up in the Linux <code class="docutils literal notranslate"><span class="pre">/proc/cpuinfo</span></code> in the host or guest.</p>
<p class="last">To validate that Intel TSX is indeed disabled for the guest, there are
two ways: (a) check for the <em>absence</em> of <code class="docutils literal notranslate"><span class="pre">rtm</span></code> in the guest’s
<code class="docutils literal notranslate"><span class="pre">/proc/cpuinfo</span></code>; or (b) the
<code class="docutils literal notranslate"><span class="pre">/sys/devices/system/cpu/vulnerabilities/tsx_async_abort</span></code> file in
the guest should report <code class="docutils literal notranslate"><span class="pre">Mitigation:</span> <span class="pre">TSX</span> <span class="pre">disabled</span></code>.</p>
</dd>
</dl>
</div>
<div class="section" id="preferred-cpu-models-for-amd-x86-hosts">
<h4>Preferred CPU models for AMD x86 hosts<a class="headerlink" href="#preferred-cpu-models-for-amd-x86-hosts" title="Permalink to this headline">¶</a></h4>
<p>The following CPU models are preferred for use on Intel hosts.
Administrators / applications are recommended to use the CPU model that
matches the generation of the host CPUs in use. In a deployment with a
mixture of host CPU models between machines, if live migration
compatibility is required, use the newest CPU model that is compatible
across all desired hosts.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">EPYC</span></code>, <code class="docutils literal notranslate"><span class="pre">EPYC-IBPB</span></code></dt>
<dd>AMD EPYC Processor (2017)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Opteron_G5</span></code></dt>
<dd>AMD Opteron 63xx class CPU (2012)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Opteron_G4</span></code></dt>
<dd>AMD Opteron 62xx class CPU (2011)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Opteron_G3</span></code></dt>
<dd>AMD Opteron 23xx (Gen 3 Class Opteron, 2009)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Opteron_G2</span></code></dt>
<dd>AMD Opteron 22xx (Gen 2 Class Opteron, 2006)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Opteron_G1</span></code></dt>
<dd>AMD Opteron 240 (Gen 1 Class Opteron, 2004)</dd>
</dl>
</div>
<div class="section" id="important-cpu-features-for-amd-x86-hosts">
<h4>Important CPU features for AMD x86 hosts<a class="headerlink" href="#important-cpu-features-for-amd-x86-hosts" title="Permalink to this headline">¶</a></h4>
<p>The following are important CPU features that should be used on AMD x86
hosts, when available in the host CPU. Some of them require explicit
configuration to enable, as they are not included by default in some, or
all, of the named CPU models listed above. In general all of these
features are included if using “Host passthrough” or “Host model”.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">ibpb</span></code></dt>
<dd><p class="first">Required to enable the Spectre v2 (CVE-2017-5715) fix.</p>
<p>Included by default in AMD CPU models with -IBPB suffix.</p>
<p>Must be explicitly turned on for AMD CPU models without -IBPB suffix.</p>
<p class="last">Requires the host CPU microcode to support this feature before it
can be used for guest CPUs.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stibp</span></code></dt>
<dd><p class="first">Required to enable stronger Spectre v2 (CVE-2017-5715) fixes in some
operating systems.</p>
<p>Must be explicitly turned on for all AMD CPU models.</p>
<p class="last">Requires the host CPU microcode to support this feature before it
can be used for guest CPUs.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">virt-ssbd</span></code></dt>
<dd><p class="first">Required to enable the CVE-2018-3639 fix</p>
<p>Not included by default in any AMD CPU model.</p>
<p>Must be explicitly turned on for all AMD CPU models.</p>
<p>This should be provided to guests, even if amd-ssbd is also provided,
for maximum guest compatibility.</p>
<p class="last">Note for some QEMU / libvirt versions, this must be force enabled when
when using “Host model”, because this is a virtual feature that
doesn’t exist in the physical host CPUs.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">amd-ssbd</span></code></dt>
<dd><p class="first">Required to enable the CVE-2018-3639 fix</p>
<p>Not included by default in any AMD CPU model.</p>
<p>Must be explicitly turned on for all AMD CPU models.</p>
<p class="last">This provides higher performance than <code class="docutils literal notranslate"><span class="pre">virt-ssbd</span></code> so should be
exposed to guests whenever available in the host. <code class="docutils literal notranslate"><span class="pre">virt-ssbd</span></code> should
none the less also be exposed for maximum guest compatibility as some
kernels only know about <code class="docutils literal notranslate"><span class="pre">virt-ssbd</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">amd-no-ssb</span></code></dt>
<dd><p class="first">Recommended to indicate the host is not vulnerable CVE-2018-3639</p>
<p>Not included by default in any AMD CPU model.</p>
<p class="last">Future hardware generations of CPU will not be vulnerable to
CVE-2018-3639, and thus the guest should be told not to enable
its mitigations, by exposing amd-no-ssb. This is mutually
exclusive with virt-ssbd and amd-ssbd.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pdpe1gb</span></code></dt>
<dd><p class="first">Recommended to allow guest OS to use 1GB size pages</p>
<p>Not included by default in any AMD CPU model.</p>
<p>Should be explicitly turned on for all AMD CPU models.</p>
<p class="last">Note that not all CPU hardware will support this feature.</p>
</dd>
</dl>
</div>
<div class="section" id="default-x86-cpu-models">
<h4>Default x86 CPU models<a class="headerlink" href="#default-x86-cpu-models" title="Permalink to this headline">¶</a></h4>
<p>The default QEMU CPU models are designed such that they can run on all
hosts.  If an application does not wish to do perform any host
compatibility checks before launching guests, the default is guaranteed
to work.</p>
<p>The default CPU models will, however, leave the guest OS vulnerable to
various CPU hardware flaws, so their use is strongly discouraged.
Applications should follow the earlier guidance to setup a better CPU
configuration, with host passthrough recommended if live migration is
not needed.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">qemu32</span></code>, <code class="docutils literal notranslate"><span class="pre">qemu64</span></code></dt>
<dd>QEMU Virtual CPU version 2.5+ (32 &amp; 64 bit variants)</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">qemu64</span></code> is used for x86_64 guests and <code class="docutils literal notranslate"><span class="pre">qemu32</span></code> is used for i686
guests, when no <code class="docutils literal notranslate"><span class="pre">-cpu</span></code> argument is given to QEMU, or no <code class="docutils literal notranslate"><span class="pre">&lt;cpu&gt;</span></code> is
provided in libvirt XML.</p>
</div>
<div class="section" id="other-non-recommended-x86-cpus">
<h4>Other non-recommended x86 CPUs<a class="headerlink" href="#other-non-recommended-x86-cpus" title="Permalink to this headline">¶</a></h4>
<p>The following CPUs models are compatible with most AMD and Intel x86
hosts, but their usage is discouraged, as they expose a very limited
featureset, which prevents guests having optimal performance.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">kvm32</span></code>, <code class="docutils literal notranslate"><span class="pre">kvm64</span></code></dt>
<dd><p class="first">Common KVM processor (32 &amp; 64 bit variants).</p>
<p class="last">Legacy models just for historical compatibility with ancient QEMU
versions.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">486</span></code>, <code class="docutils literal notranslate"><span class="pre">athlon</span></code>, <code class="docutils literal notranslate"><span class="pre">phenom</span></code>, <code class="docutils literal notranslate"><span class="pre">coreduo</span></code>, <code class="docutils literal notranslate"><span class="pre">core2duo</span></code>, <code class="docutils literal notranslate"><span class="pre">n270</span></code>, <code class="docutils literal notranslate"><span class="pre">pentium</span></code>, <code class="docutils literal notranslate"><span class="pre">pentium2</span></code>, <code class="docutils literal notranslate"><span class="pre">pentium3</span></code></dt>
<dd>Various very old x86 CPU models, mostly predating the introduction
of hardware assisted virtualization, that should thus not be
required for running virtual machines.</dd>
</dl>
</div>
</div>
<div class="section" id="syntax-for-configuring-cpu-models">
<h3>Syntax for configuring CPU models<a class="headerlink" href="#syntax-for-configuring-cpu-models" title="Permalink to this headline">¶</a></h3>
<p>The examples below illustrate the approach to configuring the various
CPU models / features in QEMU and libvirt.</p>
<div class="section" id="qemu-command-line">
<h4>QEMU command line<a class="headerlink" href="#qemu-command-line" title="Permalink to this headline">¶</a></h4>
<p>Host passthrough:</p>
<pre class="literal-block">
qemu-system-x86_64 -cpu host
</pre>
<p>Host passthrough with feature customization:</p>
<pre class="literal-block">
qemu-system-x86_64 -cpu host,-vmx,...
</pre>
<p>Named CPU models:</p>
<pre class="literal-block">
qemu-system-x86_64 -cpu Westmere
</pre>
<p>Named CPU models with feature customization:</p>
<pre class="literal-block">
qemu-system-x86_64 -cpu Westmere,+pcid,...
</pre>
</div>
<div class="section" id="libvirt-guest-xml">
<h4>Libvirt guest XML<a class="headerlink" href="#libvirt-guest-xml" title="Permalink to this headline">¶</a></h4>
<p>Host passthrough:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">cpu</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;host-passthrough&#39;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p>Host passthrough with feature customization:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">cpu</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;host-passthrough&#39;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">feature</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;vmx&quot;</span> <span class="n">policy</span><span class="o">=</span><span class="s2">&quot;disable&quot;</span><span class="o">/&gt;</span>
    <span class="o">...</span>
<span class="o">&lt;/</span><span class="n">cpu</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Host model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">cpu</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;host-model&#39;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p>Host model with feature customization:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">cpu</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;host-model&#39;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">feature</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;vmx&quot;</span> <span class="n">policy</span><span class="o">=</span><span class="s2">&quot;disable&quot;</span><span class="o">/&gt;</span>
    <span class="o">...</span>
<span class="o">&lt;/</span><span class="n">cpu</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Named model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">cpu</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;custom&#39;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">model</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Westmere&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">cpu</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Named model with feature customization:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">cpu</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;custom&#39;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">model</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Westmere&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">feature</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;pcid&quot;</span> <span class="n">policy</span><span class="o">=</span><span class="s2">&quot;require&quot;</span><span class="o">/&gt;</span>
    <span class="o">...</span>
<span class="o">&lt;/</span><span class="n">cpu</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="supported-cpu-model-configurations-on-mips-hosts">
<h3>Supported CPU model configurations on MIPS hosts<a class="headerlink" href="#supported-cpu-model-configurations-on-mips-hosts" title="Permalink to this headline">¶</a></h3>
<p>QEMU supports variety of MIPS CPU models:</p>
<div class="section" id="supported-cpu-models-for-mips32-hosts">
<h4>Supported CPU models for MIPS32 hosts<a class="headerlink" href="#supported-cpu-models-for-mips32-hosts" title="Permalink to this headline">¶</a></h4>
<p>The following CPU models are supported for use on MIPS32 hosts.
Administrators / applications are recommended to use the CPU model that
matches the generation of the host CPUs in use. In a deployment with a
mixture of host CPU models between machines, if live migration
compatibility is required, use the newest CPU model that is compatible
across all desired hosts.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">mips32r6-generic</span></code></dt>
<dd>MIPS32 Processor (Release 6, 2015)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">P5600</span></code></dt>
<dd>MIPS32 Processor (P5600, 2014)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">M14K</span></code>, <code class="docutils literal notranslate"><span class="pre">M14Kc</span></code></dt>
<dd>MIPS32 Processor (M14K, 2009)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">74Kf</span></code></dt>
<dd>MIPS32 Processor (74K, 2007)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">34Kf</span></code></dt>
<dd>MIPS32 Processor (34K, 2006)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">24Kc</span></code>, <code class="docutils literal notranslate"><span class="pre">24KEc</span></code>, <code class="docutils literal notranslate"><span class="pre">24Kf</span></code></dt>
<dd>MIPS32 Processor (24K, 2003)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">4Kc</span></code>, <code class="docutils literal notranslate"><span class="pre">4Km</span></code>, <code class="docutils literal notranslate"><span class="pre">4KEcR1</span></code>, <code class="docutils literal notranslate"><span class="pre">4KEmR1</span></code>, <code class="docutils literal notranslate"><span class="pre">4KEc</span></code>, <code class="docutils literal notranslate"><span class="pre">4KEm</span></code></dt>
<dd>MIPS32 Processor (4K, 1999)</dd>
</dl>
</div>
<div class="section" id="supported-cpu-models-for-mips64-hosts">
<h4>Supported CPU models for MIPS64 hosts<a class="headerlink" href="#supported-cpu-models-for-mips64-hosts" title="Permalink to this headline">¶</a></h4>
<p>The following CPU models are supported for use on MIPS64 hosts.
Administrators / applications are recommended to use the CPU model that
matches the generation of the host CPUs in use. In a deployment with a
mixture of host CPU models between machines, if live migration
compatibility is required, use the newest CPU model that is compatible
across all desired hosts.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">I6400</span></code></dt>
<dd>MIPS64 Processor (Release 6, 2014)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Loongson-2E</span></code></dt>
<dd>MIPS64 Processor (Loongson 2, 2006)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Loongson-2F</span></code></dt>
<dd>MIPS64 Processor (Loongson 2, 2008)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Loongson-3A1000</span></code></dt>
<dd>MIPS64 Processor (Loongson 3, 2010)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Loongson-3A4000</span></code></dt>
<dd>MIPS64 Processor (Loongson 3, 2018)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mips64dspr2</span></code></dt>
<dd>MIPS64 Processor (Release 2, 2006)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MIPS64R2-generic</span></code>, <code class="docutils literal notranslate"><span class="pre">5KEc</span></code>, <code class="docutils literal notranslate"><span class="pre">5KEf</span></code></dt>
<dd>MIPS64 Processor (Release 2, 2002)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">20Kc</span></code></dt>
<dd>MIPS64 Processor (20K, 2000</dd>
<dt><code class="docutils literal notranslate"><span class="pre">5Kc</span></code>, <code class="docutils literal notranslate"><span class="pre">5Kf</span></code></dt>
<dd>MIPS64 Processor (5K, 1999)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">VR5432</span></code></dt>
<dd>MIPS64 Processor (VR, 1998)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">R4000</span></code></dt>
<dd>MIPS64 Processor (MIPS III, 1991)</dd>
</dl>
</div>
<div class="section" id="supported-cpu-models-for-nanomips-hosts">
<h4>Supported CPU models for nanoMIPS hosts<a class="headerlink" href="#supported-cpu-models-for-nanomips-hosts" title="Permalink to this headline">¶</a></h4>
<p>The following CPU models are supported for use on nanoMIPS hosts.
Administrators / applications are recommended to use the CPU model that
matches the generation of the host CPUs in use. In a deployment with a
mixture of host CPU models between machines, if live migration
compatibility is required, use the newest CPU model that is compatible
across all desired hosts.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">I7200</span></code></dt>
<dd>MIPS I7200 (nanoMIPS, 2018)</dd>
</dl>
</div>
<div class="section" id="preferred-cpu-models-for-mips-hosts">
<h4>Preferred CPU models for MIPS hosts<a class="headerlink" href="#preferred-cpu-models-for-mips-hosts" title="Permalink to this headline">¶</a></h4>
<p>The following CPU models are preferred for use on different MIPS hosts:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">MIPS</span> <span class="pre">III</span></code></dt>
<dd>R4000</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MIPS32R2</span></code></dt>
<dd>34Kf</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MIPS64R6</span></code></dt>
<dd>I6400</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nanoMIPS</span></code></dt>
<dd>I7200</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<p>The HTML documentation of QEMU for more precise information and Linux user mode emulator invocation.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">QEMU</a></h1>



<p class="blurb">System Emulation Users Guide</p>






<div id="editpage">
  <ul>
    <li><a href="https://gitlab.com/qemu-project/qemu/-/blob/master/docs/system/qemu-cpu-models.rst">Page source</a></li>
  </ul>
</div><h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="invocation.html">Invocation</a></li>
<li class="toctree-l1"><a class="reference internal" href="keys.html">Keys in the graphical frontends</a></li>
<li class="toctree-l1"><a class="reference internal" href="mux-chardev.html">Keys in the character backend multiplexer</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitor.html">QEMU Monitor</a></li>
<li class="toctree-l1"><a class="reference internal" href="images.html">Disk Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="net.html">Network emulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtio-net-failover.html">QEMU virtio-net standby (net_failover)</a></li>
<li class="toctree-l1"><a class="reference internal" href="usb.html">USB emulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ivshmem.html">Inter-VM Shared Memory device</a></li>
<li class="toctree-l1"><a class="reference internal" href="linuxboot.html">Direct Linux Boot</a></li>
<li class="toctree-l1"><a class="reference internal" href="vnc-security.html">VNC security</a></li>
<li class="toctree-l1"><a class="reference internal" href="tls.html">TLS setup for network services</a></li>
<li class="toctree-l1"><a class="reference internal" href="gdb.html">GDB usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="managed-startup.html">Managed start up options</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpu-hotplug.html">Virtual CPU hotplug</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtio-pmem.html">virtio pmem</a></li>
<li class="toctree-l1"><a class="reference internal" href="pr-manager.html">Persistent reservation managers</a></li>
<li class="toctree-l1"><a class="reference internal" href="targets.html">QEMU System Emulator Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="deprecated.html">Deprecated features</a></li>
<li class="toctree-l1"><a class="reference internal" href="deprecated.html#recently-removed-features">Recently removed features</a></li>
<li class="toctree-l1"><a class="reference internal" href="build-platforms.html">Supported build platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, The QEMU Project Developers.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>